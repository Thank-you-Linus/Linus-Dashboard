#!/usr/bin/env bash

set -e

cd "$(dirname "$0")/.."

# Activate virtual environment if it exists
if [[ -d "ha-env" && -f "ha-env/bin/activate" ]]; then
    echo "ğŸ Activating Python virtual environment..."
    source ha-env/bin/activate
fi

echo "ğŸ§¹ Running Python linting with ruff..."
ruff format .
ruff check . --fix

# Run TypeScript/JavaScript linting if available
if command -v npx &> /dev/null && [[ -f "package.json" ]]; then
    echo "ğŸ” Running TypeScript/JavaScript checks..."
    npx tsc --noEmit || echo "âš ï¸ TypeScript check completed with warnings"
fi

echo "âœ… Linting complete!"
